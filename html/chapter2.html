<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第2章：英雄之旅的函数式编程——坎贝尔单一神话的模块化</title>
    <link rel="stylesheet" href="./assets/style.css">
    <link rel="stylesheet" href="./assets/highlight.css">
    <script src="./assets/script.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: false,
                packages: {'[+]': ['noerrors', 'ams']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/ams']
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>目录</h3>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <ul class="nav-list"><li class=""><a href="./index.html">讲好故事的艺术：从神话到科技论文</a></li><li class=""><a href="./chapter1.html">第1章：故事的原子结构——最小叙事单元与组合模式</a></li><li class="active"><a href="./chapter2.html">第2章：英雄之旅的函数式编程——坎贝尔单一神话的模块化</a></li><li class=""><a href="./chapter3.html">第3章：五幕结构的标准协议——从古希腊到好莱坞的接口设计</a></li><li class=""><a href="./chapter4.html">第4章：三幕与起承转合——东西方叙事框架的同构映射</a></li><li class=""><a href="./chapter5.html">第5章：冲突引擎的设计模式——内外冲突的分类与升级机制</a></li><li class=""><a href="./chapter6.html">第6章：案例解析：《星际穿越》的叙事架构逆向工程</a></li><li class=""><a href="./chapter7.html">第7章：角色的类与实例——原型理论与个性化参数</a></li><li class=""><a href="./chapter8.html">第8章：人物弧的状态机——从静态到动态的角色成长系统</a></li><li class=""><a href="./chapter9.html">第9章：世界观的分层架构——设定、规则与内在逻辑的一致性</a></li><li class=""><a href="./chapter10.html">第10章：魔法系统的API设计——硬魔法与软魔法的接口定义</a></li><li class=""><a href="./chapter11.html">第11章：时空框架的坐标系——线性、循环与平行叙事的实现</a></li><li class=""><a href="./chapter12.html">第12章：案例解析：《哈利·波特》的世界观工程</a></li><li class=""><a href="./chapter13.html">第13章：案例解析：《红楼梦》的多层世界观架构</a></li><li class=""><a href="./chapter14.html">第14章：悬念的队列管理——问题的提出、延迟与解答</a></li><li class=""><a href="./chapter15.html">第15章：伏笔的异步编程——回调、承诺与最终兑现</a></li><li class=""><a href="./chapter16.html">第16章：节奏的时钟周期——张弛、快慢与情绪曲线</a></li><li class=""><a href="./chapter17.html">第17章：信息密度的带宽控制——展示vs叙述的动态平衡</a></li><li class=""><a href="./chapter18.html">第18章：视角的多线程处理——全知、限制与不可靠叙述者</a></li><li class=""><a href="./chapter19.html">第19章：案例解析：《罗生门》的信息控制艺术</a></li><li class=""><a href="./chapter20.html">第20章：故事审美的不变量与变量——人类叙事偏好的历史演化</a></li><li class=""><a href="./chapter21.html">第21章：神话模式的递归结构——从洪水神话到创世神话的模板</a></li><li class=""><a href="./chapter22.html">第22章：悲剧的异常处理——亚里士多德的净化机制</a></li><li class=""><a href="./chapter23.html">第23章：喜剧的bug利用——误会、巧合与荒诞的逻辑</a></li><li class=""><a href="./chapter24.html">第24章：侦探小说的回溯算法——线索、推理与真相还原</a></li><li class=""><a href="./chapter25.html">第25章：成长故事的升级系统——从零到英雄的经验值累积</a></li><li class=""><a href="./chapter26.html">第26章：案例解析：《哈姆雷特》的悲剧算法</a></li><li class=""><a href="./chapter27.html">第27章：案例解析：《西游记》的升级系统与团队副本设计</a></li><li class=""><a href="./chapter28.html">第28章：文字的想象空间——描写的分辨率与留白的艺术</a></li><li class=""><a href="./chapter29.html">第29章：影视的镜头语言——蒙太奇、场面调度与视听节奏</a></li><li class=""><a href="./chapter30.html">第30章：游戏的交互叙事——玩家代理与emergent narrative</a></li><li class=""><a href="./chapter31.html">第31章：漫画的时空压缩——分格、留白与阅读节奏控制</a></li><li class=""><a href="./chapter32.html">第32章：音频的盲盒体验——播客、有声书与纯听觉叙事</a></li><li class=""><a href="./chapter33.html">第33章：案例解析：《原神》的开放世界叙事</a></li><li class=""><a href="./chapter34.html">第34章：连载的版本迭代——网文的敏捷开发与用户反馈循环</a></li><li class=""><a href="./chapter35.html">第35章：短视频的极限压缩——钩子、爆点与15秒完整弧</a></li><li class=""><a href="./chapter36.html">第36章：直播的实时渲染——即兴叙事与弹幕交互</a></li><li class=""><a href="./chapter37.html">第37章：社交媒体的分布式叙事——碎片化内容的聚合与重组</a></li><li class=""><a href="./chapter38.html">第38章：算法推荐下的叙事优化——留存率、完播率与情绪曲线</a></li><li class=""><a href="./chapter39.html">第39章：案例解析：《射雕英雄传》的连载叙事艺术</a></li><li class=""><a href="./chapter40.html">第40章：科技论文的叙事重构——问题、方法、发现的戏剧化</a></li><li class=""><a href="./chapter41.html">第41章：数据可视化的故事设计——让图表说话的技巧</a></li><li class=""><a href="./chapter42.html">第42章：故事与人工智能：新的可能性</a></li><li class=""><a href="./chapter43.html">第43章：技术演讲的舞台表演——TED式叙事与学术报告的平衡</a></li><li class=""><a href="./chapter44.html">第44章：案例研究的纪录片手法——真实故事的戏剧化处理</a></li><li class=""><a href="./chapter45.html">第45章：案例解析：AlphaGo论文的叙事策略</a></li><li class=""><a href="./chapter46.html">第46章：元叙事的递归调用——故事中的故事与自指结构</a></li><li class=""><a href="./chapter47.html">第47章：非线性叙事的图算法——多线索、多结局与时间循环</a></li><li class=""><a href="./chapter48.html">第48章：跨媒介叙事的适配器模式——IP的多平台展开</a></li><li class=""><a href="./chapter49.html">第49章：AI辅助创作的协处理器——提示工程与人机协作</a></li><li class=""><a href="./chapter50.html">第50章：元宇宙叙事的新维度——沉浸、互动与生成式故事</a></li><li class=""><a href="./chapter51.html">第51章：案例解析：《底特律：变人》的交互叙事实验</a></li><li class=""><a href="./chapter52.html">第52章：叙事模式库——50个可复用的故事模板</a></li><li class=""><a href="./chapter53.html">第53章：检查清单大全——各类型作品的审查要点</a></li><li class=""><a href="./chapter54.html">第54章：常见bug与调试——叙事问题的诊断与修复</a></li><li class=""><a href="./chapter55.html">第55章：跨文化移植指南——故事的本地化与全球化</a></li><li class=""><a href="./chapter56.html">第56章：叙事度量与评估——故事质量的量化分析</a></li><li class=""><a href="./chapter57.html">第57章：诊断实践：《三体》第三部的叙事问题修复</a></li><li class=""><a href="./CLAUDE.html">Untitled</a></li></ul>
        </nav>
        
        <main class="content">
            <article>
                <h1 id="2">第2章：英雄之旅的函数式编程——坎贝尔单一神话的模块化</h1>
<p>约瑟夫·坎贝尔在《千面英雄》中提炼出的"单一神话"（Monomyth）模式，是人类叙事的一个通用框架。从程序员的视角看，英雄之旅就是一个标准的函数调用链，每个阶段都是一个独立的函数，接收特定输入，产生预期输出，并为下一个函数准备参数。本章将英雄之旅解构为12个核心函数，探讨如何像编写模块化代码一样构建故事。</p>
<h2 id="21-12">2.1 英雄之旅的12个函数调用</h2>
<p>坎贝尔的英雄之旅可以映射为以下函数序列：</p>
<div class="codehilite"><pre><span></span><code><span class="nv">hero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">ordinaryWorld</span><span class="ss">()</span><span class="w">                    </span><span class="o">//</span><span class="w"> </span><span class="mi">1</span>.<span class="w"> </span>平凡世界
<span class="nv">quest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">callToAdventure</span><span class="ss">(</span><span class="nv">hero</span><span class="ss">)</span><span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="mi">2</span>.<span class="w"> </span>冒险召唤
<span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">refusalOfCall</span><span class="ss">(</span><span class="nv">hero</span>,<span class="w"> </span><span class="nv">quest</span><span class="ss">))</span><span class="w"> </span>{<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="mi">3</span>.<span class="w"> </span>拒绝召唤
<span class="w">    </span><span class="nv">hero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">meetingMentor</span><span class="ss">(</span><span class="nv">hero</span><span class="ss">)</span><span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="mi">4</span>.<span class="w"> </span>遇见导师
}
<span class="nv">hero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">crossingThreshold</span><span class="ss">(</span><span class="nv">hero</span><span class="ss">)</span><span class="w">           </span><span class="o">//</span><span class="w"> </span><span class="mi">5</span>.<span class="w"> </span>跨越门槛
<span class="nv">trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">bellyOfWhale</span><span class="ss">(</span><span class="nv">hero</span><span class="ss">)</span><span class="w">              </span><span class="o">//</span><span class="w"> </span><span class="mi">6</span>.<span class="w"> </span>试炼之路
<span class="nv">hero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">initiation</span><span class="ss">(</span><span class="nv">hero</span>,<span class="w"> </span><span class="nv">trials</span><span class="ss">)</span><span class="w">          </span><span class="o">//</span><span class="w"> </span><span class="mi">7</span>.<span class="w"> </span>最深洞穴
<span class="nv">reward</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">ordeal</span><span class="ss">(</span><span class="nv">hero</span><span class="ss">)</span><span class="w">                    </span><span class="o">//</span><span class="w"> </span><span class="mi">8</span>.<span class="w"> </span>严峻考验
<span class="nv">hero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">seizeReward</span><span class="ss">(</span><span class="nv">hero</span>,<span class="w"> </span><span class="nv">reward</span><span class="ss">)</span><span class="w">         </span><span class="o">//</span><span class="w"> </span><span class="mi">9</span>.<span class="w"> </span>获得报酬
<span class="nv">hero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">roadBack</span><span class="ss">(</span><span class="nv">hero</span><span class="ss">)</span><span class="w">                    </span><span class="o">//</span><span class="w"> </span><span class="mi">10</span>.<span class="w"> </span>归途
<span class="nv">hero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">resurrection</span><span class="ss">(</span><span class="nv">hero</span><span class="ss">)</span><span class="w">                </span><span class="o">//</span><span class="w"> </span><span class="mi">11</span>.<span class="w"> </span>复活重生
<span class="k">return</span><span class="w"> </span><span class="nv">apotheosis</span><span class="ss">(</span><span class="nv">hero</span><span class="ss">)</span><span class="w">                  </span><span class="o">//</span><span class="w"> </span><span class="mi">12</span>.<span class="w"> </span>带宝归来
</code></pre></div>

<h3 id="1-ordinaryworld-">1. ordinaryWorld() - 平凡世界</h3>
<p><strong>函数签名</strong>：建立基准状态，返回未觉醒的主角</p>
<p><strong>输入</strong>：世界设定、角色背景
<strong>输出</strong>：处于稳定状态的主角对象
<strong>副作用</strong>：建立读者的情感锚点</p>
<p>这个函数的核心任务是建立"正常"的基准线。就像单元测试中的setUp()，它创建了一个可对比的初始状态。《星球大战》中卢克在塔图因的农场生活，《黑客帝国》中尼奥的办公室日常，都是这个函数的经典实现。</p>
<p>关键在于"平凡"是相对的——对读者平凡，对角色也平凡。这创造了双重共鸣：读者理解这种日常，角色也安于这种日常。</p>
<h3 id="2-calltoadventure-">2. callToAdventure() - 冒险召唤</h3>
<p><strong>函数签名</strong>：注入扰动，触发状态改变</p>
<p><strong>输入</strong>：稳定状态的主角、外部事件
<strong>输出</strong>：包含使命信息的任务对象
<strong>副作用</strong>：打破平衡，创造张力</p>
<p>这是故事的interrupt信号。莱娅公主的全息信息、霍格沃茨的入学通知书、morpheus的红蓝药丸——都是对日常的中断请求。有效的召唤必须：</p>
<ul>
<li>不可忽视（高优先级）</li>
<li>改变现状（状态转换）</li>
<li>指向更大的世界（扩展作用域）</li>
</ul>
<h3 id="3-refusalofcall-">3. refusalOfCall() - 拒绝召唤</h3>
<p><strong>函数签名</strong>：可选的延迟函数，增加真实感</p>
<p><strong>输入</strong>：主角、召唤
<strong>输出</strong>：布尔值（是否拒绝）
<strong>副作用</strong>：强化冲突，展示内心挣扎</p>
<p>这是一个条件分支。并非所有故事都包含这一步，但它的存在让角色更立体。拒绝的理由暴露了角色的：</p>
<ul>
<li>恐惧（未知的风险）</li>
<li>责任（现有的义务）</li>
<li>自我怀疑（能力的质疑）</li>
</ul>
<p>《指环王》中弗罗多最初拒绝离开夏尔，正是因为这三者的结合。</p>
<h3 id="4-meetingmentor-">4. meetingMentor() - 遇见导师</h3>
<p><strong>函数签名</strong>：依赖注入，提供必要的工具和知识</p>
<p><strong>输入</strong>：迷茫的主角
<strong>输出</strong>：装备了新能力的主角
<strong>副作用</strong>：建立成长路径</p>
<p>导师是一个依赖注入器，为主角提供：</p>
<ul>
<li>工具（光剑、魔杖、技能）</li>
<li>知识（世界观、规则、历史）</li>
<li>信心（精神支持、认可）</li>
</ul>
<p>甘道夫、邓布利多、莫斐斯——他们都是这个函数的实例。导师不解决问题，而是赋能主角自己解决问题。</p>
<h3 id="5-crossingthreshold-">5. crossingThreshold() - 跨越门槛</h3>
<p><strong>函数签名</strong>：环境切换，正式进入冒险状态</p>
<p><strong>输入</strong>：准备就绪的主角
<strong>输出</strong>：进入新世界的主角
<strong>副作用</strong>：不可逆转的承诺</p>
<p>这是git commit --no-verify的时刻——主角正式提交到冒险中。物理上可能是：</p>
<ul>
<li>地理跨越（离开故乡）</li>
<li>维度跨越（进入魔法世界）</li>
<li>心理跨越（接受新身份）</li>
</ul>
<p>关键特征：这个跨越通常是单向的，至少在心理上不能简单撤销。</p>
<h3 id="6-bellyofwhale-">6. bellyOfWhale() - 试炼之路</h3>
<p><strong>函数签名</strong>：循环结构，通过迭代提升能力</p>
<p><strong>输入</strong>：初级英雄
<strong>输出</strong>：经验值增加的英雄
<strong>副作用</strong>：展示成长曲线</p>
<div class="codehilite"><pre><span></span><code><span class="k">while</span><span class="w"> </span><span class="ss">(</span><span class="o">!</span><span class="nv">hero</span>.<span class="nv">isReady</span><span class="ss">())</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">challenge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">generateChallenge</span><span class="ss">()</span>
<span class="w">    </span><span class="nb">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">hero</span>.<span class="nv">face</span><span class="ss">(</span><span class="nv">challenge</span><span class="ss">)</span>
<span class="w">    </span><span class="nv">hero</span>.<span class="nv">exp</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nv">calculateExp</span><span class="ss">(</span><span class="nb">result</span><span class="ss">)</span>
<span class="w">    </span><span class="nv">hero</span>.<span class="nv">levelUp</span><span class="ss">()</span>
}
</code></pre></div>

<p>这个阶段是典型的训练循环。每个小挑战都是一次迭代，累积经验值。《龙珠》的修炼、《火影》的任务、游戏中的支线任务，都在执行这个循环。</p>
<h3 id="7-initiation-">7. initiation() - 接近最深洞穴</h3>
<p><strong>函数签名</strong>：准备阶段，配置最终对决</p>
<p><strong>输入</strong>：成长后的英雄、积累的线索
<strong>输出</strong>：明确目标的英雄
<strong>副作用</strong>：聚焦冲突，提升紧张感</p>
<p>这是boss战前的准备函数。英雄已经：</p>
<ul>
<li>识别了真正的敌人</li>
<li>理解了核心冲突</li>
<li>准备了必要资源</li>
</ul>
<p>《星球大战》中潜入死星，《指环王》中接近末日山脉，都是这个函数的调用。</p>
<h3 id="8-ordeal-">8. ordeal() - 严峻考验</h3>
<p><strong>函数签名</strong>：核心冲突解决，最大的挑战</p>
<p><strong>输入</strong>：全力以赴的英雄
<strong>输出</strong>：转变后的英雄（可能包含"死亡"）
<strong>副作用</strong>：情感高潮，主题呈现</p>
<p>这是故事的性能瓶颈，所有线程都在这里汇聚。英雄面对：</p>
<ul>
<li>最强的敌人</li>
<li>最深的恐惧</li>
<li>最大的牺牲</li>
</ul>
<p>关键是"象征性死亡"——旧的自我必须死去，新的自我才能诞生。</p>
<h3 id="9-seizereward-">9. seizeReward() - 获得报酬</h3>
<p><strong>函数签名</strong>：收获阶段，获得任务奖励</p>
<p><strong>输入</strong>：胜利的英雄
<strong>输出</strong>：持有宝物的英雄
<strong>副作用</strong>：暂时的满足感</p>
<p>报酬可以是：</p>
<ul>
<li>物理宝物（圣杯、金羊毛）</li>
<li>知识真相（身世、预言）</li>
<li>内在成长（自信、爱情）</li>
</ul>
<p>这个函数常常包含twist——报酬可能不是预期的形式。</p>
<h3 id="10-roadback-">10. roadBack() - 归途</h3>
<p><strong>函数签名</strong>：返回过程，但已非原来的自己</p>
<p><strong>输入</strong>：携带宝物的英雄
<strong>输出</strong>：正在返回的英雄
<strong>副作用</strong>：反思与整合</p>
<p>归途不是简单的reverse()，而是带着新身份重新审视来路。可能遭遇：</p>
<ul>
<li>追击（敌人的最后反扑）</li>
<li>诱惑（留在新世界）</li>
<li>迷失（找不到回去的路）</li>
</ul>
<h3 id="11-resurrection-">11. resurrection() - 复活重生</h3>
<p><strong>函数签名</strong>：最终测试，证明真正的转变</p>
<p><strong>输入</strong>：接近终点的英雄
<strong>输出</strong>：完全转变的英雄
<strong>副作用</strong>：主题的最终确认</p>
<p>这是最后的单元测试——英雄必须证明自己真的改变了。通常需要：</p>
<ul>
<li>最后的牺牲</li>
<li>最难的选择</li>
<li>最深的领悟</li>
</ul>
<p>《黑客帝国》中尼奥的复活，字面上实现了这个函数。</p>
<h3 id="12-apotheosis-">12. apotheosis() - 带宝归来</h3>
<p><strong>函数签名</strong>：完成循环，分享所得</p>
<p><strong>输入</strong>：完成蜕变的英雄
<strong>输出</strong>：影响世界的英雄
<strong>副作用</strong>：新的平衡状态</p>
<p>英雄带回的不仅是宝物，更是transformation。他们成为：</p>
<ul>
<li>新秩序的建立者</li>
<li>智慧的传播者</li>
<li>下一代的导师</li>
</ul>
<p>循环完成，但世界已经改变。新的平凡世界建立，等待下一次召唤。</p>
<h2 id="22">2.2 可选参数与默认值设计</h2>
<p>英雄之旅的12个函数并非都是必需的。就像函数的可选参数，某些步骤可以省略或使用默认值。</p>
<h3 id="_1">参数的可选性</h3>
<div class="codehilite"><pre><span></span><code><span class="nv">function</span><span class="w"> </span><span class="nv">heroJourney</span><span class="ss">(</span>{
<span class="w">    </span><span class="nv">ordinary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">true</span>,<span class="w">          </span><span class="o">//</span><span class="w"> </span>是否展示平凡世界
<span class="w">    </span><span class="nv">refusal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">false</span>,<span class="w">         </span><span class="o">//</span><span class="w"> </span>是否包含拒绝召唤
<span class="w">    </span><span class="nv">mentor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">null</span>,<span class="w">           </span><span class="o">//</span><span class="w"> </span>导师角色（可为空）
<span class="w">    </span><span class="nv">trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span>,<span class="w">              </span><span class="o">//</span><span class="w"> </span>试炼次数
<span class="w">    </span><span class="nv">death</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;symbolic&#39;</span>,<span class="w">      </span><span class="o">//</span><span class="w"> </span>死亡类型：<span class="nv">literal</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">symbolic</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">none</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">true</span><span class="w">            </span><span class="o">//</span><span class="w"> </span>是否返回原世界
}<span class="ss">)</span><span class="w"> </span>{<span class="w"> </span>...<span class="w"> </span>}
</code></pre></div>

<p><strong>最简化的英雄之旅</strong>可能只包含：</p>
<ol>
<li>召唤 → 2. 跨越 → 3. 考验 → 4. 归来</li>
</ol>
<p>这是许多短篇故事的结构。例如海明威的《老人与海》：</p>
<ul>
<li>召唤：大鱼的传说</li>
<li>跨越：出海</li>
<li>考验：与鱼搏斗</li>
<li>归来：带着鱼骨返回</li>
</ul>
<h3 id="_2">默认值的文化差异</h3>
<p>不同文化对某些参数有不同的默认值：</p>
<p><strong>西方倾向</strong>：</p>
<ul>
<li>mentor = 'external'（外部导师）</li>
<li>conflict = 'external'（外部冲突）</li>
<li>resolution = 'victory'（胜利结局）</li>
</ul>
<p><strong>东方倾向</strong>：</p>
<ul>
<li>mentor = 'internal'（内心觉悟）</li>
<li>conflict = 'internal'（内心冲突）</li>
<li>resolution = 'harmony'（和谐结局）</li>
</ul>
<p>《西游记》虽然有外部导师（菩萨），但真正的成长来自内心（悟）。每一难都是外部考验，更是内心修炼。</p>
<h3 id="_3">参数组合的类型模式</h3>
<p>某些参数组合形成了特定的故事类型：</p>
<p><strong>悲剧模式</strong>：</p>
<div class="codehilite"><pre><span></span><code>{
<span class="w">    </span><span class="nv">refusal</span>:<span class="w"> </span><span class="nv">false</span>,<span class="w">        </span><span class="o">//</span><span class="w"> </span>毫不犹豫接受命运
<span class="w">    </span><span class="nv">mentor</span>:<span class="w"> </span><span class="nv">false</span>,<span class="w">         </span><span class="o">//</span><span class="w"> </span>没有指导
<span class="w">    </span><span class="nv">death</span>:<span class="w"> </span><span class="s1">&#39;literal&#39;</span>,<span class="w">      </span><span class="o">//</span><span class="w"> </span>真实死亡
<span class="w">    </span><span class="k">return</span>:<span class="w"> </span><span class="nv">false</span><span class="w">          </span><span class="o">//</span><span class="w"> </span>无法归来
}
</code></pre></div>

<p><strong>成长模式</strong>：</p>
<div class="codehilite"><pre><span></span><code>{
<span class="w">    </span><span class="nv">ordinary</span>:<span class="w"> </span><span class="nv">true</span>,<span class="w">        </span><span class="o">//</span><span class="w"> </span>强调对比
<span class="w">    </span><span class="nv">refusal</span>:<span class="w"> </span><span class="nv">true</span>,<span class="w">         </span><span class="o">//</span><span class="w"> </span>初始抗拒
<span class="w">    </span><span class="nv">trials</span>:<span class="w"> </span><span class="nv">many</span>,<span class="w">          </span><span class="o">//</span><span class="w"> </span>大量试炼
<span class="w">    </span><span class="nv">death</span>:<span class="w"> </span><span class="s1">&#39;symbolic&#39;</span>,<span class="w">     </span><span class="o">//</span><span class="w"> </span>精神重生
<span class="w">    </span><span class="k">return</span>:<span class="w"> </span><span class="nv">true</span><span class="w">           </span><span class="o">//</span><span class="w"> </span>必须回归
}
</code></pre></div>

<p><strong>史诗模式</strong>：</p>
<div class="codehilite"><pre><span></span><code>{
<span class="w">    </span><span class="nv">ordinary</span>:<span class="w"> </span><span class="nv">false</span>,<span class="w">       </span><span class="o">//</span><span class="w"> </span>直接开始
<span class="w">    </span><span class="nv">mentor</span>:<span class="w"> </span><span class="nv">multiple</span>,<span class="w">      </span><span class="o">//</span><span class="w"> </span>多个导师
<span class="w">    </span><span class="nv">trials</span>:<span class="w"> </span><span class="nv">extensive</span>,<span class="w">     </span><span class="o">//</span><span class="w"> </span>漫长试炼
<span class="w">    </span><span class="nv">death</span>:<span class="w"> </span><span class="s1">&#39;multiple&#39;</span>,<span class="w">     </span><span class="o">//</span><span class="w"> </span>多次重生
<span class="w">    </span><span class="k">return</span>:<span class="w"> </span><span class="s1">&#39;transformed&#39;</span><span class="w">  </span><span class="o">//</span><span class="w"> </span>改变世界
}
</code></pre></div>

<h2 id="23">2.3 函数的重载与多态</h2>
<p>同一个函数在不同语境下可以有不同的实现，这就是英雄之旅的多态性。</p>
<h3 id="calltoadventure">callToAdventure()的重载</h3>
<p>这个函数可以接受不同类型的参数：</p>
<p><strong>类型1：外部召唤</strong></p>
<div class="codehilite"><pre><span></span><code>callToAdventure(MessageType message)
// 霍格沃茨来信、莱娅公主求救
</code></pre></div>

<p><strong>类型2：内部召唤</strong></p>
<div class="codehilite"><pre><span></span><code>callToAdventure(DesireType desire)
// 复仇的渴望、证明自己的需要
</code></pre></div>

<p><strong>类型3：意外召唤</strong></p>
<div class="codehilite"><pre><span></span><code>callToAdventure(AccidentType accident)
// 意外获得超能力、偶然发现秘密
</code></pre></div>

<p>《蜘蛛侠》同时使用了多个重载：</p>
<ul>
<li>意外召唤：被蜘蛛咬</li>
<li>内部召唤：想用能力赚钱</li>
<li>外部召唤：叔叔之死</li>
</ul>
<h3 id="mentor">mentor()的多态实现</h3>
<p>导师函数可以有完全不同的实现方式：</p>
<p><strong>传统导师</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nx">WiseMentor</span><span class="w"> </span><span class="nx">implements</span><span class="w"> </span><span class="nx">Mentor</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">teach</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;explicit_knowledge&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nx">support</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;emotional_guidance&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
<span class="c1">// 甘道夫、邓布利多</span>
</code></pre></div>

<p><strong>对手导师</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nx">AntagonistMentor</span><span class="w"> </span><span class="nx">implements</span><span class="w"> </span><span class="nx">Mentor</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">teach</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;learning_by_conflict&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nx">support</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;growth_through_challenge&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
<span class="c1">// 《龙珠》中的贝吉塔、《火影》中的佐助</span>
</code></pre></div>

<p><strong>集体导师</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nx">CollectiveMentor</span><span class="w"> </span><span class="nx">implements</span><span class="w"> </span><span class="nx">Mentor</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">teach</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;distributed_wisdom&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nx">support</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;community_support&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
<span class="c1">// 《海贼王》的草帽团、《哈利波特》的DA军团</span>
</code></pre></div>

<p><strong>自我导师</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nx">SelfMentor</span><span class="w"> </span><span class="nx">implements</span><span class="w"> </span><span class="nx">Mentor</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">teach</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;self_discovery&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nx">support</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;inner_strength&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
<span class="c1">// 《少年派》的派、《荒野求生》的主角</span>
</code></pre></div>

<h3 id="trials">trials()的多态变体</h3>
<p>试炼函数根据故事类型有不同的实现：</p>
<p><strong>战斗升级型</strong></p>
<div class="codehilite"><pre><span></span><code><span class="nv">function</span><span class="w"> </span><span class="nv">combatTrials</span><span class="ss">(</span><span class="nv">hero</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">enemies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>[<span class="nv">weak</span>,<span class="w"> </span><span class="nv">medium</span>,<span class="w"> </span><span class="nv">strong</span>]
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="ss">(</span><span class="nv">enemy</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">enemies</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">hero</span>.<span class="nv">fight</span><span class="ss">(</span><span class="nv">enemy</span><span class="ss">)</span>
<span class="w">        </span><span class="nv">hero</span>.<span class="nv">powerLevel</span><span class="o">++</span>
<span class="w">    </span>}
}
</code></pre></div>

<p><strong>解谜进阶型</strong></p>
<div class="codehilite"><pre><span></span><code><span class="nx">function</span><span class="w"> </span><span class="nx">puzzleTrials</span><span class="p">(</span><span class="nx">hero</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">puzzles</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="nx">simple</span><span class="p">,</span><span class="w"> </span><span class="nx">complex</span><span class="p">,</span><span class="w"> </span><span class="nx">paradox</span><span class="p">]</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nx">puzzle</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">puzzles</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">hero</span><span class="p">.</span><span class="nx">solve</span><span class="p">(</span><span class="nx">puzzle</span><span class="p">)</span>
<span class="w">        </span><span class="nx">hero</span><span class="p">.</span><span class="nx">intelligence</span><span class="o">++</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>社交考验型</strong></p>
<div class="codehilite"><pre><span></span><code><span class="nv">function</span><span class="w"> </span><span class="nv">socialTrials</span><span class="ss">(</span><span class="nv">hero</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">relationships</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>[<span class="nv">trust</span>,<span class="w"> </span><span class="nv">betrayal</span>,<span class="w"> </span><span class="nv">love</span>]
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="ss">(</span><span class="nv">relationship</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">relationships</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">hero</span>.<span class="nv">navigate</span><span class="ss">(</span><span class="nv">relationship</span><span class="ss">)</span>
<span class="w">        </span><span class="nv">hero</span>.<span class="nv">empathy</span><span class="o">++</span>
<span class="w">    </span>}
}
</code></pre></div>

<p><strong>道德选择型</strong></p>
<div class="codehilite"><pre><span></span><code><span class="nv">function</span><span class="w"> </span><span class="nv">moralTrials</span><span class="ss">(</span><span class="nv">hero</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">dilemmas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>[<span class="nv">minor</span>,<span class="w"> </span><span class="nv">major</span>,<span class="w"> </span><span class="nv">ultimate</span>]
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="ss">(</span><span class="nv">dilemma</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">dilemmas</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">hero</span>.<span class="nv">choose</span><span class="ss">(</span><span class="nv">dilemma</span><span class="ss">)</span>
<span class="w">        </span><span class="nv">hero</span>.<span class="nv">wisdom</span><span class="o">++</span>
<span class="w">    </span>}
}
</code></pre></div>

<h2 id="24">2.4 纯函数与副作用管理</h2>
<p>在函数式编程中，纯函数没有副作用，相同输入总是产生相同输出。但故事需要副作用——角色必须改变，世界必须受影响。</p>
<h3 id="_4">识别纯函数</h3>
<p>英雄之旅中的某些函数可以是纯函数：</p>
<p><strong>纯函数示例</strong></p>
<div class="codehilite"><pre><span></span><code>function calculateReward(heroLevel, challengeDifficulty) {
    return heroLevel <span class="gs">* challengeDifficulty *</span> REWARD_MULTIPLIER
}

function determineOutcome(heroStrength, enemyStrength) {
    return heroStrength &gt; enemyStrength ? &#39;victory&#39; : &#39;defeat&#39;
}
</code></pre></div>

<p>这些函数：</p>
<ul>
<li>不改变输入参数</li>
<li>不依赖外部状态</li>
<li>总是返回可预测的结果</li>
</ul>
<h3 id="_5">管理必要的副作用</h3>
<p>故事的推进依赖副作用，关键是如何管理：</p>
<p><strong>状态容器模式</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="n">StoryState</span> {
    <span class="n">hero:</span> <span class="n">Hero</span>
    <span class="n">world:</span> <span class="n">World</span>
    <span class="n">relationships:</span> <span class="nb">Map</span>

    // <span class="n">所有状态改变都通过方法进行</span>
    <span class="n">transformHero</span>(<span class="n">transformation</span>) {
        <span class="n">this</span>.<span class="n">hero</span> = <span class="n">transformation</span>(<span class="n">this</span>.<span class="n">hero</span>)
        <span class="n">this</span>.<span class="n">logChange</span>(<span class="s">&#39;hero&#39;</span>, <span class="n">transformation</span>)
    }
}
</code></pre></div>

<p><strong>事件驱动模式</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="n">StoryEvents</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">emit</span><span class="p">(</span><span class="n">event</span><span class="p">,</span><span class="w"> </span><span class="k">data</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">记录所有副作用</span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">eventLog</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="err">{</span><span class="n">event</span><span class="p">,</span><span class="w"> </span><span class="k">data</span><span class="p">,</span><span class="w"> </span><span class="nc">timestamp</span><span class="err">}</span><span class="p">)</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">触发相关变化</span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">listeners</span><span class="o">[</span><span class="n">event</span><span class="o">]</span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">listener</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">listener</span><span class="p">(</span><span class="k">data</span><span class="p">))</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</code></pre></div>

<h3 id="_6">副作用的叙事价值</h3>
<p>某些副作用是故事的核心价值：</p>
<p><strong>人物成长的副作用</strong></p>
<ul>
<li>每次经历都改变角色</li>
<li>改变是不可逆的</li>
<li>累积效应创造角色弧</li>
</ul>
<p><strong>世界变化的副作用</strong></p>
<ul>
<li>英雄的行动改变世界</li>
<li>世界的改变影响其他角色</li>
<li>连锁反应推动情节</li>
</ul>
<p><strong>关系演变的副作用</strong></p>
<ul>
<li>每次互动改变关系状态</li>
<li>关系影响后续选择</li>
<li>网络效应增加复杂性</li>
</ul>
<h3 id="_7">副作用的隔离策略</h3>
<p><strong>使用Monad模式</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="n">StoryMonad</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">constructor</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">this</span><span class="o">.</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span>
<span class="w">        </span><span class="n">this</span><span class="o">.</span><span class="n">sideEffects</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">map</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fn</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">StoryMonad</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="w">            </span><span class="o">.</span><span class="n">addSideEffect</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">sideEffect</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">addSideEffect</span><span class="p">(</span><span class="n">effect</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">this</span><span class="o">.</span><span class="n">sideEffects</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">effect</span><span class="p">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">this</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>这样可以：</p>
<ul>
<li>追踪所有副作用</li>
<li>延迟副作用执行</li>
<li>选择性应用副作用</li>
</ul>
<h2 id="25-mentorthresholdtransformation">2.5 高阶函数：mentor()、threshold()、transformation()</h2>
<p>高阶函数接受函数作为参数或返回函数。在英雄之旅中，某些关键函数展现了高阶特性。</p>
<h3 id="mentor_1">mentor()作为函数工厂</h3>
<p>导师不是给予答案，而是给予获得答案的方法：</p>
<div class="codehilite"><pre><span></span><code><span class="n">function</span><span class="w"> </span><span class="n">createMentor</span><span class="p">(</span><span class="n">philosophy</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">hero</span><span class="p">,</span><span class="w"> </span><span class="n">challenge</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">switch</span><span class="p">(</span><span class="n">philosophy</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">case</span><span class="w"> </span><span class="s1">&#39;eastern&#39;</span><span class="p">:</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">situation</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">hero</span><span class="o">.</span><span class="n">meditate</span><span class="p">(</span><span class="n">situation</span><span class="p">)</span>
<span class="w">            </span><span class="n">case</span><span class="w"> </span><span class="s1">&#39;western&#39;</span><span class="p">:</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">situation</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">hero</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span><span class="n">situation</span><span class="p">)</span>
<span class="w">            </span><span class="n">case</span><span class="w"> </span><span class="s1">&#39;practical&#39;</span><span class="p">:</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">situation</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">hero</span><span class="o">.</span><span class="n">experiment</span><span class="p">(</span><span class="n">situation</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="err">使用</span>
<span class="k">const</span><span class="w"> </span><span class="n">yoda</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createMentor</span><span class="p">(</span><span class="s1">&#39;eastern&#39;</span><span class="p">)</span>
<span class="k">const</span><span class="w"> </span><span class="n">gandalf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createMentor</span><span class="p">(</span><span class="s1">&#39;western&#39;</span><span class="p">)</span>
<span class="k">const</span><span class="w"> </span><span class="n">ironman</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createMentor</span><span class="p">(</span><span class="s1">&#39;practical&#39;</span><span class="p">)</span>

<span class="o">//</span><span class="w"> </span><span class="err">英雄获得的不是答案，而是解决问题的方法</span>
<span class="n">hero</span><span class="o">.</span><span class="n">problemSolver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yoda</span><span class="p">(</span><span class="n">hero</span><span class="p">,</span><span class="w"> </span><span class="n">currentChallenge</span><span class="p">)</span>
</code></pre></div>

<p>《星球大战》中，尤达教给卢克的不是具体招式，而是"Do or do not, there is no try"的哲学——一个思维框架函数。</p>
<h3 id="threshold">threshold()的过滤器特性</h3>
<p>门槛函数是一个高阶过滤器：</p>
<div class="codehilite"><pre><span></span><code><span class="n">function</span><span class="w"> </span><span class="n">createThreshold</span><span class="p">(</span><span class="n">requirements</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">hero</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="n">tests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="n">hero</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">hero</span><span class="o">.</span><span class="n">courage</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">requirements</span><span class="o">.</span><span class="n">minCourage</span><span class="p">,</span>
<span class="w">            </span><span class="n">hero</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">hero</span><span class="o">.</span><span class="n">wisdom</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">requirements</span><span class="o">.</span><span class="n">minWisdom</span><span class="p">,</span>
<span class="w">            </span><span class="n">hero</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">hero</span><span class="o">.</span><span class="n">hasItem</span><span class="p">(</span><span class="n">requirements</span><span class="o">.</span><span class="n">keyItem</span><span class="p">),</span>
<span class="w">            </span><span class="n">hero</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">hero</span><span class="o">.</span><span class="n">hasCompleted</span><span class="p">(</span><span class="n">requirements</span><span class="o">.</span><span class="n">prerequisite</span><span class="p">)</span>
<span class="w">        </span><span class="p">]</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">tests</span><span class="o">.</span><span class="n">every</span><span class="p">(</span><span class="n">test</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">test</span><span class="p">(</span><span class="n">hero</span><span class="p">))</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="err">不同的门槛</span>
<span class="k">const</span><span class="w"> </span><span class="n">enterMordor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createThreshold</span><span class="p">({</span>
<span class="w">    </span><span class="n">minCourage</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w">    </span><span class="n">keyItem</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;ring&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="n">prerequisite</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;destroyIsengard&#39;</span>
<span class="p">})</span>

<span class="k">const</span><span class="w"> </span><span class="n">enterHogwarts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createThreshold</span><span class="p">({</span>
<span class="w">    </span><span class="n">minWisdom</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">    </span><span class="n">keyItem</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;letter&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="n">prerequisite</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;turn11&#39;</span>
<span class="p">})</span>
</code></pre></div>

<h3 id="transformation">transformation()的组合特性</h3>
<p>转变是多个函数的组合：</p>
<div class="codehilite"><pre><span></span><code><span class="n">function</span><span class="w"> </span><span class="n">createTransformation</span><span class="p">(</span><span class="o">...</span><span class="n">stages</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">hero</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">stages</span><span class="o">.</span><span class="n">reduce</span><span class="p">((</span><span class="n">currentHero</span><span class="p">,</span><span class="w"> </span><span class="n">stage</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">stage</span><span class="p">(</span><span class="n">currentHero</span><span class="p">)</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="n">hero</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="err">复杂的转变过程</span>
<span class="k">const</span><span class="w"> </span><span class="n">becomeJedi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createTransformation</span><span class="p">(</span>
<span class="w">    </span><span class="n">hero</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="o">...</span><span class="n">hero</span><span class="p">,</span><span class="w"> </span><span class="n">forceSensitive</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span><span class="p">}),</span>
<span class="w">    </span><span class="n">hero</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="o">...</span><span class="n">hero</span><span class="p">,</span><span class="w"> </span><span class="n">lightsaber</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span><span class="p">}),</span>
<span class="w">    </span><span class="n">hero</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="o">...</span><span class="n">hero</span><span class="p">,</span><span class="w"> </span><span class="n">training</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;complete&#39;</span><span class="p">}),</span>
<span class="w">    </span><span class="n">hero</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="o">...</span><span class="n">hero</span><span class="p">,</span><span class="w"> </span><span class="n">wisdom</span><span class="p">:</span><span class="w"> </span><span class="n">hero</span><span class="o">.</span><span class="n">wisdom</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">}),</span>
<span class="w">    </span><span class="n">hero</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="o">...</span><span class="n">hero</span><span class="p">,</span><span class="w"> </span><span class="n">alignment</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;light&#39;</span><span class="p">})</span>
<span class="p">)</span>

<span class="k">const</span><span class="w"> </span><span class="n">becomeSuperhero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createTransformation</span><span class="p">(</span>
<span class="w">    </span><span class="n">hero</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="o">...</span><span class="n">hero</span><span class="p">,</span><span class="w"> </span><span class="n">powers</span><span class="p">:</span><span class="w"> </span><span class="n">acquirePowers</span><span class="p">()}),</span>
<span class="w">    </span><span class="n">hero</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="o">...</span><span class="n">hero</span><span class="p">,</span><span class="w"> </span><span class="n">identity</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;secret&#39;</span><span class="p">}),</span>
<span class="w">    </span><span class="n">hero</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="o">...</span><span class="n">hero</span><span class="p">,</span><span class="w"> </span><span class="n">responsibility</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;great&#39;</span><span class="p">}),</span>
<span class="w">    </span><span class="n">hero</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="o">...</span><span class="n">hero</span><span class="p">,</span><span class="w"> </span><span class="n">nemesis</span><span class="p">:</span><span class="w"> </span><span class="n">createNemesis</span><span class="p">(</span><span class="n">hero</span><span class="p">)})</span>
<span class="p">)</span>
</code></pre></div>

<h3 id="_8">递归与迭代的高阶模式</h3>
<p><strong>递归英雄</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">function</span><span class="w"> </span><span class="n">recursiveHeroJourney</span><span class="p">(</span><span class="n">hero</span><span class="p">,</span><span class="w"> </span><span class="n">depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">depth</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">MAX_DEPTH</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">hero</span>

<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">newHero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">miniJourney</span><span class="p">(</span><span class="n">hero</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">newHero</span><span class="o">.</span><span class="n">hasAchievedGoal</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">newHero</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">recursiveHeroJourney</span><span class="p">(</span><span class="n">newHero</span><span class="p">,</span><span class="w"> </span><span class="n">depth</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<p>《盗梦空间》就是递归英雄之旅的完美体现——每一层梦境都是一个完整的英雄之旅。</p>
<p><strong>迭代提升</strong></p>
<div class="codehilite"><pre><span></span><code>function* iterativeGrowth(hero) {
    while (true) {
        hero = faceChallenge(hero)
        hero = learnLesson(hero)
        hero = incrementPower(hero)
        yield hero

        if (hero.isReady()) break
    }
    return hero
}
</code></pre></div>

<p>《龙珠》《海贼王》等长篇作品就是这种生成器模式——每个篇章yield一个更强的主角。</p>
<h2 id="_9">本章小结</h2>
<p>英雄之旅的函数式视角揭示了几个关键概念：</p>
<ol>
<li><strong>模块化</strong>：12个函数各司其职，可独立实现和测试</li>
<li><strong>可组合性</strong>：函数可以重新排列、省略或重复</li>
<li><strong>多态性</strong>：同一函数在不同语境下有不同实现</li>
<li><strong>高阶特性</strong>：某些函数操作其他函数，创造更复杂的行为</li>
<li><strong>副作用管理</strong>：故事需要改变，但改变需要被追踪和控制</li>
</ol>
<p>记住：英雄之旅不是rigid的模板，而是flexible的框架。像使用编程语言一样使用它——了解规则，然后创造性地打破规则。</p>
<p>关键公式：</p>
<ul>
<li><strong>英雄之旅 = Σ(必需函数) + Π(可选函数)</strong></li>
<li><strong>故事深度 ∝ 函数嵌套层数</strong></li>
<li><strong>角色复杂度 = f(内部状态变化, 外部关系变化)</strong></li>
</ul>
<h2 id="_10">练习题</h2>
<h3 id="_11">基础题</h3>
<p><strong>练习2.1</strong>：识别《哈利·波特与魔法石》中的12个函数调用，标注哪些被省略或修改了。</p>
<details>
<summary>提示</summary>
<p>关注以下关键时刻：</p>
<ul>
<li>生日时的猫头鹰来信</li>
<li>海格的出现</li>
<li>对角巷的新世界</li>
<li>霍格沃茨快车</li>
<li>分院帽</li>
<li>魔法石的线索</li>
<li>穿越活板门</li>
<li>面对奇洛/伏地魔</li>
<li>医院醒来</li>
</ul>
</details>
<details>
<summary>参考答案</summary>
<ol>
<li><strong>ordinaryWorld()</strong>：德思礼家的悲惨生活（强调对比）</li>
<li><strong>callToAdventure()</strong>：霍格沃茨来信（多次尝试）</li>
<li><strong>refusalOfCall()</strong>：德思礼的阻挠（外部拒绝而非内部）</li>
<li><strong>meetingMentor()</strong>：海格到来（第一导师）</li>
<li><strong>crossingThreshold()</strong>：穿过9¾站台（字面的穿越）</li>
<li><strong>bellyOfWhale()</strong>：第一学年的课程和冒险</li>
<li><strong>initiation()</strong>：发现魔法石的秘密</li>
<li><strong>ordeal()</strong>：面对奇洛/伏地魔</li>
<li><strong>seizeReward()</strong>：保护了魔法石（阻止而非获得）</li>
<li><strong>roadBack()</strong>：被省略（直接跳到医院）</li>
<li><strong>resurrection()</strong>：在医院醒来，邓布利多解释</li>
<li><strong>apotheosis()</strong>：格兰芬多赢得学院杯，暑假回家</li>
</ol>
<p>修改特点：更适合儿童文学，压缩了return阶段。</p>
</details>
<p><strong>练习2.2</strong>：将《三体》第一部的叶文洁故事线映射到英雄之旅函数，讨论哪些函数被"反向"了。</p>
<details>
<summary>提示</summary>
<p>叶文洁的"英雄之旅"是反英雄的：</p>
<ul>
<li>她的"冒险"是背叛人类</li>
<li>她的"导师"是外星文明</li>
<li>她的"宝物"是毁灭</li>
</ul>
</details>
<details>
<summary>参考答案</summary>
<ol>
<li><strong>ordinaryWorld()</strong>：文革时期的迫害</li>
<li><strong>callToAdventure()</strong>：接收到外星信号</li>
<li><strong>refusalOfCall()</strong>：初始的犹豫（很短）</li>
<li><strong>meetingMentor()</strong>：外星文明的警告（反向导师）</li>
<li><strong>crossingThreshold()</strong>：回复信号</li>
<li><strong>bellyOfWhale()</strong>：多年的秘密通信</li>
<li><strong>initiation()</strong>：建立地球三体组织</li>
<li><strong>ordeal()</strong>：面对人性的最终失望</li>
<li><strong>seizeReward()</strong>：获得三体入侵的"成功"</li>
<li><strong>roadBack()</strong>：被审判和监禁</li>
<li><strong>resurrection()</strong>：向罗辑传递信息</li>
<li><strong>apotheosis()</strong>：成为新世界的"奠基人"（反向英雄）</li>
</ol>
<p>反向特征：</p>
<ul>
<li>召唤来自对人类的绝望而非希望</li>
<li>导师是毁灭者而非拯救者</li>
<li>归来带来的是末日而非救赎</li>
</ul>
</details>
<h3 id="_12">挑战题</h3>
<p><strong>练习2.3</strong>：设计一个"非线性英雄之旅"，其中某些函数可以并行执行或乱序执行。画出可能的执行路径图。</p>
<details>
<summary>提示</summary>
<p>考虑：</p>
<ul>
<li>哪些函数有依赖关系？</li>
<li>哪些可以并行？</li>
<li>循环调用的可能性？</li>
</ul>
</details>
<details>
<summary>参考答案</summary>
<div class="codehilite"><pre><span></span><code>并行架构：

主线程：<span class="nv">ordinary</span><span class="w"> </span>→<span class="w"> </span><span class="nv">call</span><span class="w"> </span>→<span class="w"> </span><span class="nv">threshold</span><span class="w"> </span>→<span class="w"> </span><span class="nv">ordeal</span><span class="w"> </span>→<span class="w"> </span><span class="k">return</span>
├─<span class="w"> </span>线程<span class="nv">A</span>：<span class="nv">mentor</span>（可在任何时候出现）
├─<span class="w"> </span>线程<span class="nv">B</span>：<span class="nv">trials</span>（持续进行）
└─<span class="w"> </span>线程<span class="nv">C</span>：<span class="nv">refusal</span><span class="w"> </span>⟲<span class="w"> </span><span class="nv">acceptance</span>（循环）

可能路径：

<span class="mi">1</span>.<span class="w"> </span>传统线性：<span class="mi">1</span>→<span class="mi">2</span>→<span class="mi">3</span>→<span class="mi">4</span>→<span class="mi">5</span>→<span class="mi">6</span>→<span class="mi">7</span>→<span class="mi">8</span>→<span class="mi">9</span>→<span class="mi">10</span>→<span class="mi">11</span>→<span class="mi">12</span>
<span class="mi">2</span>.<span class="w"> </span>快速通道：<span class="mi">1</span>→<span class="mi">2</span>→<span class="mi">5</span>→<span class="mi">8</span>→<span class="mi">12</span>（速通模式）
<span class="mi">3</span>.<span class="w"> </span>循环成长：<span class="mi">1</span>→<span class="mi">2</span>→<span class="mi">3</span>→<span class="mi">4</span>→<span class="mi">5</span>→<span class="mi">6</span>→<span class="mi">5</span>→<span class="mi">6</span>→<span class="mi">5</span>→<span class="mi">6</span>→<span class="mi">8</span>→<span class="mi">12</span>
<span class="mi">4</span>.<span class="w"> </span>多重召唤：<span class="mi">1</span>→<span class="mi">2</span>→<span class="mi">3</span>→<span class="mi">2</span>→<span class="mi">3</span>→<span class="mi">2</span>→<span class="mi">5</span>→<span class="mi">8</span>→<span class="mi">12</span>
<span class="mi">5</span>.<span class="w"> </span>导师延迟：<span class="mi">1</span>→<span class="mi">2</span>→<span class="mi">5</span>→<span class="mi">6</span>→<span class="mi">4</span>→<span class="mi">7</span>→<span class="mi">8</span>→<span class="mi">12</span>

实例：《源代码》

<span class="o">-</span><span class="w"> </span>不断循环<span class="nv">trials</span>直到找到解决方案
<span class="o">-</span><span class="w"> </span><span class="nv">mentor</span>（博士）持续提供信息
<span class="o">-</span><span class="w"> </span>每次循环都是<span class="nv">mini</span><span class="w"> </span><span class="nv">journey</span>
</code></pre></div>

</details>
<p><strong>练习2.4</strong>：创建一个高阶函数<code>createGenreSpecificJourney()</code>，它根据不同类型（爱情、侦探、恐怖）返回不同的英雄之旅实现。</p>
<details>
<summary>提示</summary>
<p>每种类型对standard functions有不同解释：</p>
<ul>
<li>爱情：ordeal = 表白/分手</li>
<li>侦探：trials = 收集线索</li>
<li>恐怖：mentor = 可能是反派</li>
</ul>
</details>
<details>
<summary>参考答案</summary>
<div class="codehilite"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">createGenreSpecificJourney</span><span class="p">(</span><span class="nx">genre</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">implementations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">romance</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">ordinary</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;单身/不相信爱情&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">call</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;遇见特别的人&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">refusal</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;否认感觉/害怕受伤&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">mentor</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;闺蜜/已婚朋友的建议&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">threshold</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;第一次约会&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">trials</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;误会/前任/家庭反对&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">ordeal</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;分手危机/重大误解&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">reward</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;真爱的确认&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="k">return</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;回到日常但已改变&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">resurrection</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;最后的考验/选择&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">apotheosis</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;结婚/稳定关系&quot;</span>
<span class="w">        </span><span class="p">},</span>

<span class="w">        </span><span class="nx">detective</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">ordinary</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;日常办案&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">call</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;神秘案件出现&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">refusal</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;案件超出管辖/太危险&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">mentor</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;退休老探长/档案线索&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">threshold</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;接手案件&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">trials</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;收集证据/审问嫌疑人&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">ordeal</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;直面真凶/生死对决&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">reward</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;真相大白&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="k">return</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;结案报告&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">resurrection</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;法庭对决/最后反转&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">apotheosis</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;正义得到伸张&quot;</span>
<span class="w">        </span><span class="p">},</span>

<span class="w">        </span><span class="nx">horror</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">ordinary</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;平静的生活&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">call</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;诡异事件发生&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">refusal</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;理性解释/否认超自然&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">mentor</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;神秘学专家/幸存者警告&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">threshold</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;无法逃避的遭遇&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">trials</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;逐渐升级的恐怖事件&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">ordeal</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;直面恐怖源头&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">reward</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;幸存/获得驱邪方法&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="k">return</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;逃离恐怖之地&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">resurrection</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;恐怖回归/最后一击&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">apotheosis</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;彻底解决或永远改变&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">heroName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">journey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">implementations</span><span class="p">[</span><span class="nx">genre</span><span class="p">]</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">execute</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">heroName</span><span class="si">}</span><span class="sb">的</span><span class="si">${</span><span class="nx">genre</span><span class="si">}</span><span class="sb">之旅：`</span><span class="p">)</span>
<span class="w">                </span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">journey</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">step</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`- </span><span class="si">${</span><span class="nx">step</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="nx">journey</span><span class="p">[</span><span class="nx">step</span><span class="p">]()</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="w">                </span><span class="p">})</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 使用</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">romanceJourney</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createGenreSpecificJourney</span><span class="p">(</span><span class="s1">&#39;romance&#39;</span><span class="p">)</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">myStory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">romanceJourney</span><span class="p">(</span><span class="s1">&#39;Elizabeth&#39;</span><span class="p">)</span>
<span class="nx">myStory</span><span class="p">.</span><span class="nx">execute</span><span class="p">()</span>
</code></pre></div>

</details>
<p><strong>练习2.5</strong>：分析《盗梦空间》的递归英雄之旅结构，标注每一层梦境中的英雄之旅元素。</p>
<details>
<summary>提示</summary>
<p>考虑：</p>
<ul>
<li>每层都有完整journey吗？</li>
<li>不同层的mentor是谁？</li>
<li>ordeal如何嵌套？</li>
</ul>
</details>
<details>
<summary>参考答案</summary>
<p><strong>现实层</strong></p>
<ul>
<li>ordinary：柯布的逃亡生活</li>
<li>call：齐藤的任务</li>
<li>mentor：岳父（迈尔斯教授）</li>
<li>ordeal：完成inception</li>
<li>reward：回家的自由</li>
</ul>
<p><strong>第一层梦境（雨中城市）</strong></p>
<ul>
<li>ordinary：van中入梦</li>
<li>call：绑架费舍尔</li>
<li>trials：躲避投射的追击</li>
<li>ordeal：van坠落/时间压力</li>
<li>return：kick回上层</li>
</ul>
<p><strong>第二层梦境（酒店）</strong></p>
<ul>
<li>ordinary：酒店场景建立</li>
<li>call：说服费舍尔</li>
<li>mentor：伊姆斯的伪装</li>
<li>trials：防御投射的攻击</li>
<li>ordeal：零重力战斗</li>
<li>return：电梯爆炸kick</li>
</ul>
<p><strong>第三层梦境（雪山医院）</strong></p>
<ul>
<li>ordinary：雪山要塞</li>
<li>call：进入保险库</li>
<li>trials：突破防御</li>
<li>ordeal：费舍尔"死亡"</li>
<li>resurrection：进入limbo救费舍尔</li>
<li>reward：费舍尔的顿悟</li>
</ul>
<p><strong>Limbo层</strong></p>
<ul>
<li>ordinary：柯布与茉儿的世界</li>
<li>call：救出齐藤和费舍尔</li>
<li>mentor：阿里阿德妮</li>
<li>ordeal：面对茉儿的投射</li>
<li>transformation：接受茉儿的死亡</li>
<li>return：所有人醒来</li>
</ul>
<p>递归特点：</p>
<ul>
<li>每层时间膨胀创造独立journey空间</li>
<li>深层的ordeal影响浅层的结果</li>
<li>mentor角色在不同层转换</li>
<li>最深层的心理journey是真正的核心</li>
</ul>
</details>
<p><strong>练习2.6</strong>：设计一个"反英雄之旅"函数链，其中每个传统函数都被颠倒或腐化。举例说明如何应用到《教父》。</p>
<details>
<summary>提示</summary>
<p>反英雄之旅可能包括：</p>
<ul>
<li>堕落而非成长</li>
<li>获得的是诅咒而非祝福</li>
<li>导师可能是腐化者</li>
</ul>
</details>
<details>
<summary>参考答案</summary>
<p><strong>反英雄之旅函数链</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">antiHeroJourney</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">paradiseWorld</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;完美的初始状态，即将失去&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">corruption</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;腐化的召唤，看似是机会&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">embraceTheDark</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;主动接受黑暗&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">darkMentor</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;遇见腐化者/引诱者&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">pointOfNoReturn</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;跨越道德边界&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">moralDecay</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;逐步的道德沦丧&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">killTheGood</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;消灭内心的善良&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">darkOrdeal</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;最黑暗的行为&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">cursedPower</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;获得被诅咒的力量&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">isolationPath</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;走向孤独&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">hollowVictory</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;空虚的胜利&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">damnation</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;最终的堕落/诅咒&quot;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>《教父》中的应用</strong></p>
<ol>
<li>
<p><strong>paradiseWorld()</strong>：迈克尔的战后美国梦，战争英雄，想要正当生活</p>
</li>
<li>
<p><strong>corruption()</strong>：父亲被刺杀，家族需要他</p>
</li>
<li>
<p><strong>embraceTheDark()</strong>："It's not personal, it's business"</p>
</li>
<li>
<p><strong>darkMentor()</strong>：老维托虽是父亲，但也是黑暗导师</p>
</li>
<li>
<p><strong>pointOfNoReturn()</strong>：杀死索拉佐和警长</p>
</li>
<li>
<p><strong>moralDecay()</strong>：
   - 逃亡西西里
   - 学习家族事业
   - 变得冷酷</p>
</li>
<li>
<p><strong>killTheGood()</strong>：第一任妻子被杀，彻底改变</p>
</li>
<li>
<p><strong>darkOrdeal()</strong>：清洗五大家族</p>
</li>
<li>
<p><strong>cursedPower()</strong>：成为新教父</p>
</li>
<li>
<p><strong>isolationPath()</strong>：</p>
<ul>
<li>欺骗凯</li>
<li>疏远家人</li>
<li>只剩恐惧没有爱</li>
</ul>
</li>
<li>
<p><strong>hollowVictory()</strong>：家族获胜但失去灵魂</p>
</li>
<li>
<p><strong>damnation()</strong>：在教堂时的谎言，门关上，独自一人</p>
</li>
</ol>
<p>关键差异：</p>
<ul>
<li>每个"成就"都是道德的沦丧</li>
<li>mentor引向黑暗而非光明</li>
<li>trials是良心的折磨而非外部挑战</li>
<li>reward是诅咒伪装的祝福</li>
<li>return是永远无法回到innocence</li>
</ul>
</details>
<h2 id="_13">常见陷阱与错误</h2>
<h3 id="1">1. 机械套用陷阱</h3>
<p><strong>错误</strong>：强行让每个故事都包含全部12个步骤
<strong>正确</strong>：根据故事需要选择和调整函数</p>
<h3 id="2_1">2. 顺序执着陷阱</h3>
<p><strong>错误</strong>：严格按照1-12的顺序
<strong>正确</strong>：允许乱序、并行、循环</p>
<h3 id="3">3. 单一实现陷阱</h3>
<p><strong>错误</strong>：每个函数只有一种标准实现
<strong>正确</strong>：探索多态性，创造独特实现</p>
<h3 id="4">4. 西方中心陷阱</h3>
<p><strong>错误</strong>：只用坎贝尔的西方视角
<strong>正确</strong>：融合不同文化的英雄概念</p>
<h3 id="5">5. 外部冲突偏见</h3>
<p><strong>错误</strong>：ordeal必须是外部敌人
<strong>正确</strong>：内心冲突同样有效，甚至更深刻</p>
<h3 id="6">6. 导师依赖陷阱</h3>
<p><strong>错误</strong>：必须有明确的导师角色
<strong>正确</strong>：导师可以是经历、书籍、甚至反面教材</p>
<h3 id="7">7. 归来强迫症</h3>
<p><strong>错误</strong>：英雄必须回到起点
<strong>正确</strong>：有些旅程是单向的，回不去才是重点</p>
<h3 id="8">8. 成长单向性</h3>
<p><strong>错误</strong>：英雄只能变得更强大
<strong>正确</strong>：失去和软弱也是成长</p>
<h2 id="_14">最佳实践检查清单</h2>
<h3 id="_15">设计阶段</h3>
<ul>
<li>[ ] 确定核心转变是什么（内在vs外在）</li>
<li>[ ] 选择必需函数，标记可选函数</li>
<li>[ ] 设计独特的函数实现，避免陈词滥调</li>
<li>[ ] 考虑文化背景对默认值的影响</li>
<li>[ ] 规划副作用的级联效应</li>
</ul>
<h3 id="_16">实现阶段</h3>
<ul>
<li>[ ] ordinary world与final world形成有意义的对比</li>
<li>[ ] call to adventure对主角而言是不可拒绝的</li>
<li>[ ] trials逐步升级且每个都有具体功能</li>
<li>[ ] ordeal真正考验核心特质而非表面能力</li>
<li>[ ] transformation是真实的而非表面的</li>
</ul>
<h3 id="_17">优化阶段</h3>
<ul>
<li>[ ] 检查是否有冗余的函数调用</li>
<li>[ ] 验证函数间的因果链是否合理</li>
<li>[ ] 确保高潮（ordeal）获得足够的准备</li>
<li>[ ] 平衡内部和外部的冲突</li>
<li>[ ] 审查每个函数的叙事投资回报率</li>
</ul>
<h3 id="_18">调试阶段</h3>
<ul>
<li>[ ] 如果故事拖沓，考虑合并或删除某些函数</li>
<li>[ ] 如果缺乏深度，考虑函数的递归或嵌套</li>
<li>[ ] 如果太过predictable，尝试函数的异常实现</li>
<li>[ ] 如果情感共鸣不足，加强副作用的描写</li>
<li>[ ] 如果主题不清，检查transformation是否对应主题</li>
</ul>
<p>记住：英雄之旅是工具，不是教条。像优秀的程序员对待设计模式一样对待它——理解原理，灵活应用，必要时大胆创新。</p>
            </article>
            
            <nav class="page-nav"><a href="./chapter1.html" class="nav-link prev">← 第1章：故事的原子结构——最小叙事单元与组合模式</a><a href="./chapter3.html" class="nav-link next">第3章：五幕结构的标准协议——从古希腊到好莱坞的接口设计 →</a></nav>
        </main>
    </div>
</body>
</html>